categories:
  - MOLGENIS
questions:
  - variable: environment
    label: Environment
    description: "Environment of MOLGENIS instance"
    type: enum
    options:
      - edge
      - dev
      - test
      - accept
      - prod
    required: true
    group: "Provisioning"
  - variable: image.tag
    label: Version
    default: "stable"
    description: "Select a MOLGENIS version (check the registry.molgenis.org or hub.docker.com for released tags)"
    type: string
    required: true
    group: "Provisioning"
  - variable: questions.advanced
    label: Advanced mode
    default: false
    description: "Do you want to override the default values in advanced mode"
    type: boolean
    required: true
    group: "Advanced"
  - variable: image.repository
    show_if: "questions.advanced=true"
    label: Registry
    default: "registry.hub.docker.com"
    description: "Select a registry to pull from"
    type: enum
    options:
      - "registry.hub.docker.com"
      - "registry.molgenis.org"
    required: true
    group: "Provisioning"
  - variable: adminPassword
    label: Administrator password
    default: ""
    description: "Enter the administrator password"
    type: password
    required: true
    group: "Provisioning"
  - variable: catalinaOpts
    show_if: "questions.advanced=true"
    default: "-XX:MaxRAMPercentage=80 -XX:+UseConcMarkSweepGC -XX:+CMSClassUnloadingEnabled"
    type: string
    label: "Catalina options"
    group: "MOLGENIS"
  - variable: "resources.requests.memory"
    show_if: "questions.advanced=true"
    group: "MOLGENIS"
    label: "Requested memory"
    type: enum
    options:
      - "2Gi"
      - "3Gi"
      - "4Gi"
    default: "2Gi"
  - variable: "resources.limits.memory"
    show_if: "questions.advanced=true"
    group: "MOLGENIS"
    label: "Max memory"
    description: "Max amount of memory, see https://kubernetes.io/docs/concepts/configuration/manage-compute-resources-container/"
    type: enum
    options:
      - "2Gi"
      - "3Gi"
      - "4Gi"
    default: "2Gi"
  - variable: "resources.requests.cpu"
    show_if: "questions.advanced=true"
    group: "MOLGENIS"
    label: "Requested cpu"
    type: enum
    options:
      - "500m"
      - "1"
      - "2"
      - "4"
    default: "1"
  - variable: "resources.limits.cpu"
    show_if: "questions.advanced=true"
    group: "MOLGENIS"
    label: "Max cpu"
    description: "Max amount of cpu, see https://kubernetes.io/docs/concepts/configuration/manage-compute-resources-container/"
    type: enum
    options:
      - "500m"
      - "1"
      - "2"
      - "4"
    default: "1"
  - variable: sentry.dsn
    show_if: "questions.advanced=true"
    label: Sentry datasource name
    default: "https://c35baf01cbd1411abeea7472ebc2a050@sentry.molgenis.org/1"
    description: "Specify the Sentry datasource name with the following format: https://{public key}@sentry.molgenis.org/{project id}"
    required: true
    group: "Sentry"
    type: string
  - variable: opencpu
    show_if: "questions.advanced=true"
    label: OpenCPU cluster
    default: "opencpu-opencpu.molgenis-opencpu"
    description: "Specify the OpenCPU cluster (assuming you deployed the OpenCPU instance in the namespace 'molgenis-opencpu' and release name 'opencpu'"
    required: true
    type: string
    group: "OpenCPU"
  - variable: persistence.enabled
    show_if: "questions.advanced=true"
    default: true
    label: Persist MOLGENIS filestore
    type: boolean
    group: "Filestore"
    show_subquestion_if: true
    subquestions:
      - variable: persistence.size
        show_if: "questions.advanced=true"
        default: "5Gi"
        label: MOLGENIS filestore volume size
        type: enum
        options:
          - "5Gi"
          - "10Gi"
          - "30Gi"
      - variable: persistence.storageClass
        show_if: "questions.advanced=true"
        required: false
        label: MOLGENIS filestore storage class
        type: storageclass
  - variable: minio.minioConfig.region
    show_if: "questions.advanced=true"
    label: Region
    group: "Minio"
    type: string
    default: "eu-central-1"
  - variable: minio.minioConfig.browser
    type: enum
    options:
      - "on"
      - "off"
    default: "on"
    show_if: "questions.advanced=true"
    label: Browser
    group: "Minio"
  - variable: minio.accessKey
    show_if: "questions.advanced=true"
    label: Access key
    default: molgenis
    type: password
    min_length: 5
    max_length: 20
    group: "Minio"
  - variable: minio.secretKey
    show_if: "questions.advanced=true"
    label: Secret key
    default: molgenis
    type: password
    min_length: 8
    max_length: 40
    group: "Minio"
  - variable: minio.persistence.enabled
    show_if: "questions.advanced=true"
    default: true
    label: Persist Minio blobstore
    type: boolean
    group: "Minio"
    show_subquestion_if: true
    subquestions:
      - variable: minio.persistence.size
        show_if: "questions.advanced=true"
        default: "5Gi"
        label: Minio blobstore size
        type: enum
        options:
          - "5Gi"
          - "10Gi"
          - "30Gi"
      - variable: minio.persistence.storageClass
        show_if: "questions.advanced=true"
        required: false
        label: Minio storage class
        type: storageclass
  - variable: postgresql.persistence.enabled
    show_if: "questions.advanced=true"
    default: true
    label: Persist PostgreSQL database
    type: boolean
    group: "Database"
    show_subquestion_if: true
    subquestions:
      - variable: postgresql.persistence.size
        show_if: "questions.advanced=true"
        default: "5Gi"
        label: PostgreSQL size
        type: enum
        options:
          - "5Gi"
          - "10Gi"
          - "30Gi"
      - variable: postgresql.persistence.storageClass
        show_if: "questions.advanced=true"
        required: false
        label: Postgresql storage class
        type: storageclass
  - variable: molgenis-elasticsearch.persistence.enabled
    show_if: "questions.advanced=true"
    default: true
    label: Persist elasticsearch index
    type: boolean
    group: "Index"
    show_subquestion_if: true
    subquestions:
      - variable: molgenis-elasticsearch.master.persistence.size
        show_if: "questions.advanced=true"
        default: "5Gi"
        label: elasticsearch index size
        type: enum
        options:
          - "5Gi"
          - "10Gi"
          - "30Gi"
      - variable: molgenis-elasticsearch.persistence.storageClass
        show_if: "questions.advanced=true"
        required: false
        label: elasticsearch storage class
        type: storageclass